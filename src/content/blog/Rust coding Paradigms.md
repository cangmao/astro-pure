---
title: RUST编程思想学习（1）
description: '如何理解RUST是一门强类型语言'
publishDate: 2025-11-12 16:55:47
tags:
  - Coding
  - Rust
  - Programming Paradigms
---
## **类型概念**

Rust参考了Typed Functional Programming（比较常见的是OCaml和F#）。如果不正确理解“类型”（“Type”）在Rust语言中的含义，将会很难理解其他语言特性。可以说，通过类型来确保安全性是Rust的一个设计主题，基本上整个语言都是围绕着这种模式设计的。

## **引子**

比如要在代码中表示一个Email地址，我们可以用一个字符串来表示：“user@abc.com”。如果我们说字符串的类型是String，那么Email是否等价于String呢？不是的，因为“abc”显然是一个字符串，但是不是合法的Email地址 。那么，Email就类似于String的一个子集，它定义了一个类型。

Rust的引用类型就是在这个类型安全的基础上，保证了整个程序的安全性：

1. 数据类型，规范内存数据的合法性，即对象内容；
2. trait，规范对内存数据的有效操作，即对象行为；
3. lifetime，规范内存引用（指针）的有效性，即对象生命周期。

## **Rust数据类型**

### *基础数据类型*

i8, i16, i32, i64, i128, isize(有符号的整数)

u8, u16, u32, u64, u128, isize(无符号整数）

Bool

f32 (32位浮点数)

f64 (64位浮点数)

### *文本类型*

char Unicode代码点，4字节

str (属于引用类型)UTF-8编码的Unicode字符串，长度不固定

### 引用类型

**&T:** 对类型T的只读指针，且符合引用原则

**&mut T:** 对类型T的可写指针，且符合引用原则

***const T:** 对类型T的只读指针，跟C/C++一样没啥限制（Unsafe Rust中使用）

***mut T:** 对类型T的可写指针，跟C/C++一样没啥限制（Unsafe Rust中使用）

**fn:** 函数指针，指向内容是一段可执行代码，代码只能只读，因此无所谓mut，类型包括函数的签名，比如 fn(u8)->bool

### 特殊类型

有一个特殊类型叫做unit，写作“()”（括号），这个类型只有一个值，也写作“()”（括号）。这个类型大小为0， 不对应内存位置，只是一种类型系统上的结构。比如，如果一个函数不返回任何具体的值（调用只是为了它的副作 用），则它的类型是“()”；

还有一个类型叫做never，写作“!”（感叹号），没有值，比如函数exit，调用之后就进程退出，永远不返回，则其 返回类型是“!”；

### 数组类型

内置组合类型

* **slice:** 如上文所说，表示一段连续内存，[T]；
* **array:** 如上文所说，表示一段固定大小的连续内存，[T;N]；
* **tuple:** tuple表示一段内存，由不同类型组成，比如(u8,u16,f64)表示一段内存，大小是16个字节(Rust会考虑对齐，所以本来是1+2+8=11字节，但是为了对齐所以扩展成了最大元素8的整数倍，即16字节；即Rust不对内 存中tuple成员的顺序和具体位置做保证)，数组可以理解成tuple的特例，比如[u8;4]可以理解为(u8,u8,u8,u8)， 但是注意这只是概念上的理解，这两个仍然不是可以互相转换的；

### 自定义组合数据

* Struct结构体

结构体类名 {
    字段名 : 字段值,
    ...
}

* Enum枚举

enum WebEvent {

    // 一个`enum` 可以是单元结构体（称为 `unit-like` 或 `unit`），
    PageLoad,
    PageUnload,
    // 或者一个元组结构体，
    KeyPress(char),
    Paste(String),
    // 或者一个普通的结构体。
    Click { x: i64, y: i64 }
}

## 总结

通过struct、enum、array、turple及基础类型的应用，灵活定制程序中所需的数据结构，从而保证程序的安全性。

参考材料：[通过标准库学透Rust系列（二）Rust语言中的类型和安全性 - 知乎](https://zhuanlan.zhihu.com/p/671660023)
